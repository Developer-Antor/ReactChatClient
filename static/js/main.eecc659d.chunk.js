(this["webpackJsonpdojo-blog"]=this["webpackJsonpdojo-blog"]||[]).push([[0],{57:function(e,t,a){},58:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var c=a(5),n=a(2),s=a(26),o=a.n(s),i=a(11),r=a(31),l=a(10),d=(a(57),a(48)),u=a.n(d),j=(a(58),a(35)),b=j.a.initializeApp({apiKey:"AIzaSyCWITDBqlWNHajkbzQYvTKnaoeXo4tpM7o",authDomain:"whatsapp-clone-840ac.firebaseapp.com",projectId:"whatsapp-clone-840ac",storageBucket:"whatsapp-clone-840ac.appspot.com",messagingSenderId:"217993161224",appId:"1:217993161224:web:6d5deab2d11939795d7fbd"}),m=b.firestore(),p=b.auth(),h=(new j.a.auth.GoogleAuthProvider,m),f=Object(n.createContext)(),O=function(e){var t=e.reducer,a=e.initialState,s=e.children;return Object(c.jsx)(f.Provider,{value:Object(n.useReducer)(t,a),children:s})},g=function(){return Object(n.useContext)(f)},x=a(93);var v=function(){var e,t,a=Object(n.useState)(""),s=Object(i.a)(a,2),o=s[0],r=s[1],d=Object(n.useState)([]),b=Object(i.a)(d,2),m=b[0],p=b[1],f=g(),O=Object(i.a)(f,2),v=O[0].user,y=(O[1],Object(l.e)().roomId),S=Object(n.useState)(""),N=Object(i.a)(S,2),w=N[0],C=N[1];return Object(n.useEffect)((function(){y&&(h.collection("rooms").doc(y).onSnapshot((function(e){C(e.data().name)})),h.collection("rooms").doc(y).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){p(e.docs.map((function(e){return e.data()})))})))}),[y]),console.log(m),Object(c.jsxs)("div",{className:"chat",children:[Object(c.jsxs)("div",{className:"chat-header",children:[Object(c.jsx)(x.a,{onClick:function(){document.querySelector(".chat").classList.remove("show")}}),Object(c.jsx)("h2",{children:w}),Object(c.jsxs)("p",{children:["Last seen at",new Date(null===(e=m[m.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()]})]}),Object(c.jsx)("div",{className:"chat-body",children:m.map((function(e){var t;return Object(c.jsxs)("p",{className:"chat-message ".concat(e.name===v.displayName&&"chat-reciever"),children:[Object(c.jsx)("span",{className:"chat-name",children:e.name}),e.message,Object(c.jsx)("span",{className:"chat-timestamp",children:new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()})]})}))}),Object(c.jsxs)("form",{className:"chat-footer",children:[Object(c.jsx)("input",{value:o,onChange:function(e){r(e.target.value)},type:"text",placeholder:"Write a message"}),Object(c.jsx)("button",{onClick:function(e){e.preventDefault(),h.collection("rooms").doc(y).collection("messages").add({message:o,name:v.displayName,timestamp:j.a.firestore.FieldValue.serverTimestamp()}),r("")},type:"submit",children:Object(c.jsx)(u.a,{})})]})]})},y=a(94),S=a(43),N="SET_USER";a(73);var w=function(){var e=g(),t=Object(i.a)(e,2),a=(t[0],t[1]),s=Object(n.useState)(""),o=Object(i.a)(s,2),r=o[0],l=o[1],d=Object(n.useState)(""),u=Object(i.a)(d,2),j=u[0],b=u[1],m=Object(n.useState)(""),h=Object(i.a)(m,2),f=h[0],O=h[1],x=Object(n.useState)(""),v=Object(i.a)(x,2),S=v[0],w=v[1],C=Object(n.useState)(""),k=Object(i.a)(C,2),I=k[0],E=k[1];return Object(c.jsxs)("div",{className:"login",children:[Object(c.jsxs)("div",{className:"extra",children:[Object(c.jsx)("p",{children:"If You Has Already Registered Then SignIn To See Message"}),Object(c.jsx)(y.a,{onClick:function(){document.getElementById("signup").classList.add("show3")},style:{color:"#fff",background:"#67d3fb",margin:"10px"},children:"Register"}),Object(c.jsx)(y.a,{onClick:function(){return document.getElementById("signin").classList.add("show2")},style:{color:"#fff",background:"#67d3fb",margin:"10px"},children:"Login"})]}),Object(c.jsxs)("div",{className:"login-container",id:"signin",children:[Object(c.jsx)("img",{src:"https://cdn0.iconfinder.com/data/icons/kameleon-free-pack-rounded/110/Chat-2-512.png",alt:""}),Object(c.jsx)("input",{placeholder:"Email",value:f,onChange:function(e){O(e.target.value)},type:"text"}),Object(c.jsx)("input",{placeholder:"Password",value:S,onChange:function(e){w(e.target.value)},type:"password"}),Object(c.jsx)(y.a,{style:{color:"#fff",margin:"10px",background:"#67d3fb"},className:"login-button",type:"submit",onClick:function(){p.signInWithEmailAndPassword(f,S).then((function(e){a({type:N,user:e.user})})).catch((function(e){alert(e.message)}))},children:"Sign In"})]}),Object(c.jsxs)("div",{className:"login-container",id:"signup",children:[Object(c.jsx)("img",{src:"https://cdn0.iconfinder.com/data/icons/kameleon-free-pack-rounded/110/Chat-2-512.png",alt:""}),Object(c.jsx)("input",{required:!0,placeholder:"Username",value:I,onChange:function(e){E(e.target.value)},type:"text"}),Object(c.jsx)("input",{placeholder:"Email",value:r,onChange:function(e){l(e.target.value)},type:"text"}),Object(c.jsx)("input",{placeholder:"Password",value:j,onChange:function(e){b(e.target.value)},type:"password"}),Object(c.jsx)(y.a,{style:{color:"#fff",margin:"10px",background:"#67d3fb"},className:"login-button",type:"submit",onClick:function(){p.createUserWithEmailAndPassword(r,j).then((function(e){e.user.updateProfile({displayName:I}),a({type:N,user:e.user})})).catch((function(e){alert(e.message)}))},children:"Sign Up"})]})]})},C=(a(74),a(95)),k=(a(75),a.p+"static/media/undraw_profile_pic_ic5t (1).19cef30a.png");var I=function(e){var t,a=e.addNewChat,s=e.name,o=e.id,l=Object(n.useState)([]),d=Object(i.a)(l,2),u=d[0],j=d[1];return Object(n.useEffect)((function(){return o&&h.collection("rooms").doc(o).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){j(e.docs.map((function(e){return e.data()})))})),function(){}}),[o]),a?Object(c.jsx)("div",{onClick:function(){var e=prompt("Please enter a name for room");e&&h.collection("rooms").add({name:e})},className:"add sidebar-chat",children:Object(c.jsx)("h2",{children:"Add New Room"})}):Object(c.jsx)(r.b,{to:"/rooms/".concat(o),children:Object(c.jsxs)("div",{onClick:function(){document.querySelector(".chat").classList.add("show")},className:"sidebar-chat",children:[Object(c.jsx)(C.a,{src:k}),Object(c.jsxs)("div",{className:"sidebar-chat-info",children:[Object(c.jsx)("h2",{children:s}),Object(c.jsx)("p",{children:null===(t=u[0])||void 0===t?void 0:t.message})]})]})})};var E=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],s=t[1],o=g(),r=Object(i.a)(o,2),l=r[0].user;return r[1],console.log(l.uid),Object(n.useEffect)((function(){h.collection("rooms").onSnapshot((function(e){s(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(c.jsxs)("div",{className:"sidebar",children:["6RwwAYVqUghDmLR7Cz9SYMmtbFI3"===l.uid?Object(c.jsx)(I,{addNewChat:!0}):null,a.map((function(e){return Object(c.jsx)(I,{id:e.id,name:e.data.name},e.id)}))]})};var A=function(){var e=g(),t=Object(i.a)(e,2),a=t[0].user;return t[1],Object(c.jsx)("div",{className:"app",children:a?Object(c.jsx)("div",{className:"app-body",children:Object(c.jsxs)(r.a,{children:[Object(c.jsx)(l.a,{path:"/",children:Object(c.jsx)(E,{className:"mysidebar"})}),Object(c.jsx)(l.a,{exact:!0,path:"/rooms/:roomId",children:Object(c.jsx)(v,{})})]})}):Object(c.jsx)(w,{})})};o.a.render(Object(c.jsx)(O,{initialState:{user:null,username:null},reducer:function(e,t){switch(t.type){case N:return Object(S.a)(Object(S.a)({},e),{},{user:t.user});default:return e}},children:Object(c.jsx)(A,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.eecc659d.chunk.js.map